(function(){"use strict";var t={3326:function(t,n,e){var o=e(5130),i=(e(8992),e(4520),e(2577),e(1454),e(7550),e(6768)),a=e(4232),l=e(144),s=e(3243);const u={class:"flex justify-center mt-4 gap-2"},r=["disabled"],c={key:0,class:"loading loading-spinner loading-xs"},d=["disabled"],f={key:0,class:"loading loading-spinner loading-xs"},v={class:"overflow-x-auto"},b={class:"table table-zebra"},p=["onUpdate:modelValue"],h=["onClick"],k={key:1,class:"flex gap-2"},y=["onClick"],w=["onClick"],g=["onClick"],x=["onClick"];var C={__name:"App",setup(t){const n=(0,l.KR)(""),e=(0,l.KR)(!1),C=(0,l.KR)([]),E=(0,l.KR)(!1),L=(0,l.KR)(!1),m=(0,i.EW)((()=>C.value.some((t=>t.isFinished))));function O(){L.value=window.scrollY>50}function T(){window.scrollTo({top:0,behavior:"smooth"})}async function X(){try{const t=new s.Parse.Query("ToDo");let n=await t.find();C.value=n.map((t=>({id:t.id,text:t.get("text"),isFinished:t.get("isFinished")||!1,isEdit:!1})))}catch(t){console.log(t)}}async function j(){e.value=!0;const t=new s.Parse.Object("ToDo");t.set("text",n.value);try{await t.save(),n.value="",await X(),e.value=!1}catch(o){alert("上傳失敗"+o.message)}}function P(t){C.value[t].isEdit=!0}async function F(t){let n=C.value[t];try{const e=new s.Parse.Query("ToDo");e.equalTo("objectId",n.id);const o=await e.first();o.set("text",n.text),await o.save(),C.value[t].isEdit=!1}catch(e){alert("更新失敗"+e.message)}}async function Q(t){let n=C.value[t];try{const t=new s.Parse.Query("ToDo");t.equalTo("objectId",n.id);const e=await t.first();await e.destroy(),await X()}catch(e){console.log(e)}}async function _(){try{E.value=!0;const t=C.value.filter((t=>t.isFinished));for(let n of t){const t=new s.Parse.Query("ToDo");t.equalTo("objectId",n.id);const e=await t.first();e&&await e.destroy()}await X()}catch(t){console.log("刪除已完成項目失敗:",t)}finally{E.value=!1}}async function D(t){let n=C.value[t];try{const t=new s.Parse.Query("ToDo"),e=await t.get(n.id),o=!n.isFinished;e.set("isFinished",o),await e.save(),n.isFinished=o}catch(e){alert("完成失敗: "+e.message)}}return(0,i.sV)((()=>{X(),window.addEventListener("scroll",O)})),(0,i.hi)((()=>{window.removeEventListener("scroll",O)})),(t,l)=>((0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("div",u,[(0,i.bo)((0,i.Lk)("input",{type:"text",placeholder:"今天要做什麼呢?","onUpdate:modelValue":l[0]||(l[0]=t=>n.value=t),class:"input input-bordered input-md w-full max-w-xs"},null,512),[[o.Jo,n.value]]),(0,i.Lk)("button",{onClick:j,disabled:e.value||""===n.value,class:"btn"},[e.value?((0,i.uX)(),(0,i.CE)("span",c)):(0,i.Q3)("",!0),l[1]||(l[1]=(0,i.eW)(" 儲存 "))],8,r),(0,i.Lk)("button",{onClick:_,disabled:!m.value||E.value,class:"btn"},[E.value?((0,i.uX)(),(0,i.CE)("span",f)):(0,i.Q3)("",!0),l[2]||(l[2]=(0,i.eW)(" 刪除已完成 "))],8,d)]),(0,i.Lk)("div",v,[(0,i.Lk)("table",b,[l[3]||(l[3]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"編號"),(0,i.Lk)("th",null,"內容"),(0,i.Lk)("th",null,"編輯"),(0,i.Lk)("th",null,"進度")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(C.value,((t,n)=>((0,i.uX)(),(0,i.CE)("tr",{key:n},[(0,i.Lk)("th",null,(0,a.v_)(n+1),1),(0,i.Lk)("td",null,[t.isEdit?(0,i.bo)(((0,i.uX)(),(0,i.CE)("input",{key:1,type:"text",placeholder:"今天要做甚麼呢?","onUpdate:modelValue":n=>t.text=n,class:"input input-bordered input-md w-full max-w-xs"},null,8,p)),[[o.Jo,t.text]]):((0,i.uX)(),(0,i.CE)("p",{key:0,class:(0,a.C4)({"line-through text-gray-400":t.isFinished})},(0,a.v_)(t.text),3))]),(0,i.Lk)("td",null,[t.isEdit?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t=>P(n),class:"btn btn-neutral btn-outline btn-xs"},"編輯",8,h)),t.isEdit?((0,i.uX)(),(0,i.CE)("div",k,[(0,i.Lk)("button",{onClick:t=>F(n),class:"btn btn-success btn-outline btn-xs"},"更新",8,y),(0,i.Lk)("button",{onClick:t=>Q(n),class:"btn btn-error btn-outline btn-xs"},"刪除",8,w)])):(0,i.Q3)("",!0)]),(0,i.Lk)("td",null,[t.isFinished?((0,i.uX)(),(0,i.CE)("button",{key:1,onClick:t=>D(n),class:"btn btn-info btn-outline btn-xs"},"已完成",8,x)):((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t=>D(n),class:"btn btn-warning btn-outline btn-xs"},"未完成",8,g))])])))),128))])])]),(0,i.Lk)("div",null,[(0,i.bo)((0,i.Lk)("button",{onClick:T,class:"fixed bottom-4 right-4 bg-gray-400 text-white px-2 py-2 rounded-full hover:bg-gray-500 transition"}," TOP ⭡ ",512),[[o.aG,L.value]])])]))}};const E=C;var L=E,m=e(1387);const O=[],T=(0,m.aE)({history:(0,m.LA)(""),routes:O});var X=T;s.Parse.initialize("YVSv1PeSEiQ1H0Dvfp8TCFhdXp6HvGUwD7LdO3WH","o6wREjJQMpDn6GHzmgStGXRhnYr8j8XEfPOTo9Mb"),s.Parse.serverURL="https://parseapi.back4app.com",(0,o.Ef)(L).use(X).mount("#app")}},n={};function e(o){var i=n[o];if(void 0!==i)return i.exports;var a=n[o]={exports:{}};return t[o].call(a.exports,a,a.exports,e),a.exports}e.m=t,function(){var t=[];e.O=function(n,o,i,a){if(!o){var l=1/0;for(c=0;c<t.length;c++){o=t[c][0],i=t[c][1],a=t[c][2];for(var s=!0,u=0;u<o.length;u++)(!1&a||l>=a)&&Object.keys(e.O).every((function(t){return e.O[t](o[u])}))?o.splice(u--,1):(s=!1,a<l&&(l=a));if(s){t.splice(c--,1);var r=i();void 0!==r&&(n=r)}}return n}a=a||0;for(var c=t.length;c>0&&t[c-1][2]>a;c--)t[c]=t[c-1];t[c]=[o,i,a]}}(),function(){e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,{a:n}),n}}(),function(){e.d=function(t,n){for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)}}(),function(){var t={524:0};e.O.j=function(n){return 0===t[n]};var n=function(n,o){var i,a,l=o[0],s=o[1],u=o[2],r=0;if(l.some((function(n){return 0!==t[n]}))){for(i in s)e.o(s,i)&&(e.m[i]=s[i]);if(u)var c=u(e)}for(n&&n(o);r<l.length;r++)a=l[r],e.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return e.O(c)},o=self["webpackChunkto_do_list"]=self["webpackChunkto_do_list"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=e.O(void 0,[504],(function(){return e(3326)}));o=e.O(o)})();
//# sourceMappingURL=app.225d5b67.js.map